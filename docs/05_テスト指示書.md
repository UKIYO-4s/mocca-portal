# Mocca Portal 運用テスト指示書

**作成日:** 2025年12月30日
**対象環境:** ステージング
**テスト期間:** ____年__月__日 〜 ____年__月__日

---

## 1. テスト環境情報

### 1.1 アクセス先
| 項目 | 値 |
|------|-----|
| URL | https://mocca.sd-create.jp |
| 推奨ブラウザ | Chrome / Safari / Firefox（最新版） |

### 1.2 テストアカウント

| ロール | メールアドレス | パスワード | 権限概要 |
|--------|---------------|-----------|----------|
| 管理者 | admin@mocca-portal.local | Smskso0311 | 全機能アクセス可能 |
| マネージャー | manager@mocca-portal.local | Smskso0311 | スタッフ管理以外の全機能 |
| スタッフ | staff@mocca-portal.local | Smskso0311 | 自分の操作のみ（閲覧・入力） |

**重要:** 各ロールで同じ機能をテストし、権限による動作差異を確認してください。

---

## 2. テスト実施手順

### 2.1 基本フロー
1. 上記URLにアクセス
2. テストアカウントでログイン
3. 各機能をテスト（下記チェックリスト参照）
4. 結果を記録
5. 別のロールでログインし直して同様にテスト

### 2.2 テスト記録方法
- 各項目の結果欄に ○（正常）/ ×（不具合）/ △（要確認）を記入
- 不具合発見時は「6. 不具合報告シート」に詳細を記録
- 改善提案があれば「7. 改善提案シート」に記載

---

## 3. 機能別テストチェックリスト

### 3.1 認証機能

| No | テスト項目 | 操作手順 | 期待結果 | Admin | Manager | Staff | 備考 |
|----|-----------|----------|----------|:-----:|:-------:|:-----:|------|
| A-01 | ログイン | メール/パスワード入力→ログインボタン | ダッシュボードに遷移 | | | | |
| A-02 | ログアウト | 右上メニュー→ログアウト | ログイン画面に遷移 | | | | |
| A-03 | Googleログイン | 「Googleでログイン」ボタン | Google認証画面表示 | | | | 未登録メールは拒否されること |
| A-04 | パスワード変更 | プロフィール→パスワード変更 | 変更後、新パスワードでログイン可能 | | | | |

### 3.2 二要素認証（2FA）

**⚠️ 重要な注意事項:**
- 2FAを有効化すると、以降のログインでコード入力が必須になります
- **テスト完了後は必ず2FAを無効化してください**（他のテスターがログインできなくなります）
- リカバリーコードは必ずメモしてから次のテストに進んでください

| No | テスト項目 | 操作手順 | 期待結果 | Admin | Manager | Staff | 備考 |
|----|-----------|----------|----------|:-----:|:-------:|:-----:|------|
| 2F-01 | 2FA設定画面アクセス | プロフィール→二要素認証設定 | QRコードが表示される | | | | |
| 2F-02 | QRコードスキャン | 認証アプリでQRコードをスキャン | アプリに「Mocca Portal」が追加される | | | | Google Authenticator推奨 |
| 2F-03 | 2FA有効化 | 認証アプリの6桁コード入力→有効化 | 「有効」表示、リカバリーコード8個表示 | | | | リカバリーコードをメモ |
| 2F-04 | 2FA認証（ログイン） | ログアウト→再ログイン | コード入力画面が表示される | | | | |
| 2F-05 | 正しいコードで認証 | 認証アプリの6桁コード入力 | ダッシュボードに遷移 | | | | |
| 2F-06 | 間違ったコードで認証 | 誤った6桁コード入力 | エラーメッセージ表示 | | | | |
| 2F-07 | リカバリーコード使用 | リカバリーコード入力 | ダッシュボードに遷移、コード1つ消費 | | | | |
| 2F-08 | リカバリーコード再生成 | 設定画面→パスワード入力→再生成 | 新しい8個のコード表示 | | | | |
| 2F-09 | 2FA無効化 | 設定画面→パスワード入力→無効化 | 「無効」表示に変更 | | | | |

### 3.3 ダッシュボード

| No | テスト項目 | 操作手順 | 期待結果 | Admin | Manager | Staff | 備考 |
|----|-----------|----------|----------|:-----:|:-------:|:-----:|------|
| D-01 | ダッシュボード表示 | ログイン後自動遷移 | クイックアクションが表示される | | | | |
| D-02 | ナビゲーション | 左サイドメニュークリック | 各画面に遷移できる | | | | |

### 3.4 予約管理（ばんしろう）

| No | テスト項目 | 操作手順 | 期待結果 | Admin | Manager | Staff | 備考 |
|----|-----------|----------|----------|:-----:|:-------:|:-----:|------|
| RB-01 | 予約一覧表示 | 予約→ばんしろう→一覧 | 予約一覧が表示される | | | | |
| RB-02 | 予約新規作成 | 新規作成ボタン→5ステップ入力→保存 | 一覧に追加される | | | | |
| RB-03 | 予約詳細表示 | 一覧から予約をクリック | 詳細画面表示 | | | | |
| RB-04 | 予約編集 | 詳細画面→編集ボタン→変更→保存 | 変更が反映される | | | | |
| RB-05 | 予約削除 | 詳細画面→削除ボタン→確認 | 一覧から削除される | | | | |
| RB-06 | フィルター | 日付/ステータスでフィルター | 該当する予約のみ表示 | | | | |

### 3.5 予約管理（もっか）

| No | テスト項目 | 操作手順 | 期待結果 | Admin | Manager | Staff | 備考 |
|----|-----------|----------|----------|:-----:|:-------:|:-----:|------|
| RM-01 | 予約一覧表示 | 予約→もっか→一覧 | 予約一覧が表示される | | | | |
| RM-02 | 予約新規作成 | 新規作成ボタン→入力→保存 | 一覧に追加される | | | | |
| RM-03 | 予約詳細表示 | 一覧から予約をクリック | 詳細画面表示 | | | | |
| RM-04 | 予約編集 | 詳細画面→編集ボタン→変更→保存 | 変更が反映される | | | | |
| RM-05 | 予約削除 | 詳細画面→削除ボタン→確認 | 一覧から削除される | | | | |

### 3.6 チェックリスト

| No | テスト項目 | 操作手順 | 期待結果 | Admin | Manager | Staff | 備考 |
|----|-----------|----------|----------|:-----:|:-------:|:-----:|------|
| CL-01 | テンプレート一覧 | チェックリスト→テンプレート管理 | テンプレート一覧表示 | | | | Staff: アクセス不可のはず |
| CL-02 | テンプレート作成 | 新規作成→項目追加→保存 | テンプレート追加される | | | | |
| CL-03 | テンプレート編集 | 編集ボタン→変更→保存 | 変更が反映される | | | | |
| CL-04 | テンプレート削除 | 削除ボタン→確認 | 削除される | | | | |
| CL-05 | 日次チェックリスト表示 | チェックリスト→一覧 | 当日のチェックリスト表示 | | | | |
| CL-06 | チェック入力 | 項目をクリック | チェックが付く/外れる | | | | |
| CL-07 | 完了率表示 | チェック入力後 | 進捗バーが更新される | | | | |

### 3.7 備品管理

| No | テスト項目 | 操作手順 | 期待結果 | Admin | Manager | Staff | 備考 |
|----|-----------|----------|----------|:-----:|:-------:|:-----:|------|
| IV-01 | 使用入力画面 | 備品管理→使用入力 | 備品一覧表示（Staff: 在庫数非表示） | | | | |
| IV-02 | 使用記録 | 数量入力→記録ボタン | 記録完了メッセージ | | | | |
| IV-03 | 管理画面 | 備品管理→管理 | 在庫一覧表示（Manager+のみ） | | | | Staff: アクセス不可 |
| IV-04 | 備品追加 | 新規追加→入力→保存 | 一覧に追加される | | | | |
| IV-05 | 備品編集 | 編集ボタン→変更→保存 | 変更が反映される | | | | |
| IV-06 | 補充記録 | 編集画面→補充ボタン→数量入力 | 在庫数が増加 | | | | |
| IV-07 | 在庫調整 | 編集画面→調整ボタン→数量入力 | 在庫数が変更される | | | | |
| IV-08 | 備品削除 | 削除ボタン→確認 | 削除される | | | | |
| IV-09 | 操作履歴 | 備品管理→履歴 | 操作ログ一覧表示 | | | | |

### 3.8 タイムカード

| No | テスト項目 | 操作手順 | 期待結果 | Admin | Manager | Staff | 備考 |
|----|-----------|----------|----------|:-----:|:-------:|:-----:|------|
| TC-01 | 打刻画面表示 | タイムカード→打刻 | 現在時刻と打刻ボタン表示 | | | | |
| TC-02 | 出勤打刻 | 出勤ボタンクリック | 出勤時刻が記録される | | | | |
| TC-03 | 退勤打刻 | 退勤ボタンクリック | 退勤時刻が記録される | | | | 出勤後のみ有効 |
| TC-04 | 履歴表示 | タイムカード→履歴 | 自分の勤務履歴表示 | | | | |
| TC-05 | 管理画面 | タイムカード→管理 | 全員の勤怠一覧（Manager+のみ） | | | | Staff: アクセス不可 |
| TC-06 | 勤怠修正 | 管理画面→編集→変更→保存 | 修正が反映される | | | | |
| TC-07 | 月次レポート | タイムカード→レポート | 月次集計表示 | | | | |
| TC-08 | 休憩2回目エラー | 同日に2回目の休憩開始操作 | エラーメッセージ表示 | | | | 休憩は1日1回の仕様 |

### 3.9 お知らせ

| No | テスト項目 | 操作手順 | 期待結果 | Admin | Manager | Staff | 備考 |
|----|-----------|----------|----------|:-----:|:-------:|:-----:|------|
| AN-01 | お知らせ一覧 | お知らせ→一覧 | お知らせ一覧表示（未読マーク付き） | | | | |
| AN-02 | お知らせ詳細 | 一覧から選択 | 詳細表示、自動で既読に | | | | |
| AN-03 | お知らせ作成 | 新規作成→入力→保存 | 一覧に追加される | | | | Staff: 作成不可 |
| AN-04 | お知らせ編集 | 編集ボタン→変更→保存 | 変更が反映される | | | | |
| AN-05 | お知らせ削除 | 削除ボタン→確認 | 削除される | | | | |
| AN-06 | 下書き保存 | 公開せずに保存 | 下書き状態で保存される | | | | |
| AN-07 | 優先度表示 | 高/緊急のお知らせ確認 | 目立つ表示になる | | | | |

### 3.10 シフト管理

| No | テスト項目 | 操作手順 | 期待結果 | Admin | Manager | Staff | 備考 |
|----|-----------|----------|----------|:-----:|:-------:|:-----:|------|
| SH-01 | 週間シフト表示 | シフト→週間表示 | 今週のシフト表（月曜始まり） | | | | |
| SH-02 | 週移動 | 前週/次週ボタン | 表示週が変わる | | | | |
| SH-03 | 月間カレンダー | シフト→カレンダー | 月間カレンダー表示 | | | | |
| SH-04 | マイシフト | シフト→マイシフト | 自分のシフトのみ表示 | | | | |
| SH-05 | シフト管理画面 | シフト→管理 | シフト管理（Manager+のみ） | | | | Staff: アクセス不可 |
| SH-06 | シフト作成 | 新規作成→日時入力→保存 | シフト追加される | | | | |
| SH-07 | シフト編集 | 編集ボタン→変更→保存 | 変更が反映される | | | | |
| SH-08 | シフト削除 | 削除ボタン→確認 | 削除される | | | | |
| SH-09 | 重複エラー | 同一人物に時間帯重複シフト作成 | エラーメッセージ表示 | | | | |
| SH-10 | 日跨ぎエラー | 終了時刻≤開始時刻でシフト作成（例: 22:00-06:00） | エラーメッセージ表示 | | | | 仕様で日跨ぎ禁止 |

### 3.11 ユーザー管理（Admin専用）

| No | テスト項目 | 操作手順 | 期待結果 | Admin | Manager | Staff | 備考 |
|----|-----------|----------|----------|:-----:|:-------:|:-----:|------|
| US-01 | ユーザー一覧 | ユーザー管理 | ユーザー一覧表示 | | N/A | N/A | Adminのみアクセス可 |
| US-02 | 権限変更 | ユーザー選択→権限変更 | 権限が変更される | | N/A | N/A | |
| US-03 | ユーザー削除 | 削除ボタン→確認 | ユーザー削除される | | N/A | N/A | |

### 3.12 JPYC投げ銭（ゲスト向け）

**⚠️ 実行前の準備事項:**
- テスト用ウォレット（MetaMask等）の準備
- 少額のJPYCトークン（Polygonネットワーク）
- 少額のMATIC（ガス代用）
- **実送金テストの可否を事前に確認すること**

| No | テスト項目 | 操作手順 | 期待結果 | 結果 | 備考 |
|----|-----------|----------|----------|:----:|------|
| JP-01 | ゲストページ生成 | 管理画面からQRコード生成 | QRコード表示 | | |
| JP-02 | ゲストページアクセス | QRコードスキャン or URL直接 | 投げ銭ページ表示 | | |
| JP-03 | スタッフ表示 | ゲストページで担当スタッフ確認 | 割り当てスタッフ表示 | | |
| JP-04 | 投げ銭送金フロー | 投げ銭ボタン→金額選択 | MetaMask接続→Polygon確認→JPYC送金→成功UI・トランザクションリンク表示 | | **実送金発生** |
| JP-05 | 口コミリンク | Google口コミボタン | Google口コミページに遷移 | | |
| JP-06 | 有効期限切れ | 期限切れURLアクセス | 期限切れメッセージ表示 | | |

### 3.13 プロフィール

| No | テスト項目 | 操作手順 | 期待結果 | Admin | Manager | Staff | 備考 |
|----|-----------|----------|----------|:-----:|:-------:|:-----:|------|
| PF-01 | プロフィール表示 | 右上メニュー→プロフィール | プロフィール画面表示 | | | | |
| PF-02 | 名前変更 | 名前変更→保存 | 変更が反映される | | | | |
| PF-03 | メール変更 | メール変更→保存 | 変更が反映される | | | | |
| PF-04 | アカウント削除 | アカウント削除→パスワード入力→確認 | アカウント削除される | | | | テスト用アカウントでは実行しない |

---

## 4. 非機能テスト

### 4.1 レスポンシブ対応

| No | テスト項目 | 確認方法 | 期待結果 | 結果 | 備考 |
|----|-----------|----------|----------|:----:|------|
| NF-01 | PC表示（1920px） | ブラウザフル画面 | レイアウト崩れなし | | |
| NF-02 | タブレット表示（768px） | ブラウザ幅変更 or 実機 | レイアウト崩れなし | | |
| NF-03 | スマホ表示（375px） | ブラウザ幅変更 or 実機 | レイアウト崩れなし | | |
| NF-04 | ナビゲーション（モバイル） | ハンバーガーメニュー | メニュー開閉可能 | | |

### 4.2 ダークモード

| No | テスト項目 | 確認方法 | 期待結果 | 結果 | 備考 |
|----|-----------|----------|----------|:----:|------|
| NF-05 | ダークモード表示 | OS設定をダークモードに | 全画面がダーク対応 | | |
| NF-06 | 文字の視認性 | ダークモードで各画面確認 | 文字が読みやすい | | |

### 4.3 エラーハンドリング

| No | テスト項目 | 確認方法 | 期待結果 | 結果 | 備考 |
|----|-----------|----------|----------|:----:|------|
| NF-07 | 404エラー | 存在しないURL入力 | エラーページ表示 | | |
| NF-08 | 権限エラー | Staff で管理画面URL直接アクセス | 403または リダイレクト | | |
| NF-09 | バリデーションエラー | 必須項目未入力で送信 | エラーメッセージ表示 | | |

---

## 5. データ保全・復旧テスト

| No | テスト項目 | 確認方法 | 期待結果 | 結果 | 備考 |
|----|-----------|----------|----------|:----:|------|
| DP-01 | データ永続化 | 予約作成後ログアウト→再ログイン | データが保持されている | | |
| DP-02 | 同時編集 | 2ブラウザで同一データ編集 | 後からの保存が反映される | | |
| DP-03 | 削除確認ダイアログ | 削除操作時 | 確認ダイアログが表示される | | |

---

## 6. 不具合報告シート

発見した不具合は以下の形式で記録してください。

### 不具合 #___

| 項目 | 内容 |
|------|------|
| **発見日時** | ____年__月__日 __:__ |
| **発見者** | |
| **重要度** | [ ] 致命的 [ ] 重大 [ ] 中 [ ] 軽微 |
| **テスト項目No** | |
| **使用アカウント** | [ ] Admin [ ] Manager [ ] Staff |
| **発生画面** | |
| **再現手順** | 1. <br>2. <br>3. |
| **期待結果** | |
| **実際の結果** | |
| **スクリーンショット** | （添付） |
| **ブラウザ/OS** | |
| **備考** | |

---

## 7. 改善提案シート

使いやすさ・機能に関する改善提案があれば記録してください。

### 提案 #___

| 項目 | 内容 |
|------|------|
| **提案日** | ____年__月__日 |
| **提案者** | |
| **対象画面/機能** | |
| **現状の問題点** | |
| **改善案** | |
| **期待される効果** | |
| **優先度** | [ ] 高 [ ] 中 [ ] 低 |

---

## 8. テスト完了報告

### 8.1 テスト実施サマリー

| 項目 | 値 |
|------|-----|
| テスト実施期間 | ____年__月__日 〜 ____年__月__日 |
| テスト実施者 | |
| テスト項目総数 | 約100項目 |
| 成功 | ___件 |
| 失敗 | ___件 |
| 未実施 | ___件 |
| 発見不具合数 | ___件（致命的:__ 重大:__ 中:__ 軽微:__） |
| 改善提案数 | ___件 |

### 8.2 総合評価

| 評価項目 | 評価（5段階） | コメント |
|----------|:------------:|----------|
| 機能の完成度 | | |
| 操作性 | | |
| デザイン/視認性 | | |
| レスポンス速度 | | |
| エラー処理 | | |

### 8.3 リリース可否判定

[ ] リリース可（不具合なし、または軽微のみ）
[ ] 条件付きリリース可（重大不具合修正後）
[ ] リリース不可（致命的不具合あり）

### 8.4 特記事項

（テスト中に気づいた点、運用上の注意点など自由記述）

---

## 9. 補足情報

### 9.1 テスト時の注意事項
1. **テストデータの作成**: 予約・シフト等は実際に作成してテストしてください
2. **削除操作**: テストデータの削除は問題ありません
3. **⚠️ 2FA設定**: **テスト完了後は必ず無効化してください！** 有効のままだと他のテスターがログインできなくなります
4. **⚠️ JPYC投げ銭**: **実送金が発生します** テスト用ウォレット・少額残高を事前に準備し、実行可否を確認してからテストしてください
5. **スクリーンショット**: 不具合発見時は必ず撮影してください

### 9.2 問い合わせ先
テスト中に不明点があれば、開発担当者に連絡してください。

---

**以上**
